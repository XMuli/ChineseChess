// SPDX-License-Identifier: GPL-3.0-or-later
// SPDX-FileCopyrightText: 2019-2026 XMuli & Contributors

#include "PuzzleData.h"

// 棋子ID映射 (黑方0-15, 红方16-31):
// 黑: 车0,马1,象2,士3,将4,士5,象6,马7,车8,炮9,炮10,卒11-15
// 红: 车16,马17,象18,士19,帅20,士21,象22,马23,车24,炮25,炮26,兵27-31
//
// 棋盘坐标: row 0-9 (0=黑方底线/上方), col 0-8 (0=左侧)
// 九宫格: 黑方 row 0-2, col 3-5; 红方 row 7-9, col 3-5
// 黑方半场: row 0-4; 红方半场: row 5-9

QVector<PuzzleConfig> getBuiltinPuzzles()
{
    QVector<PuzzleConfig> puzzles;

    // ============================================================
    // 残局1: 双车错 (红先胜)
    // 红双车配合，逼将入绝路
    // 布局: 黑将d10, 黑士e10; 红车a9, 红车h3, 红帅e1
    // 思路: 双车交替将军，逐步逼杀
    // ============================================================
    {
        PuzzleConfig p;
        p.name = "双车错";
        p.description = "红先胜，双车交替将军";
        p.redFirst = true;
        p.playerIsRed = true;
        p.pieces = {
            {4, 0, 3},   // 黑将 d10 (row=0,col=3) 九宫内✓
            {5, 0, 4},   // 黑士 e10 (row=0,col=4) 九宫内✓
            {16, 8, 0},  // 红车 a2  (row=8,col=0)
            {24, 6, 7},  // 红车 h4  (row=6,col=7)
            {20, 9, 4},  // 红帅 e1  (row=9,col=4) 九宫内✓
        };
        puzzles.append(p);
    }

    // ============================================================
    // 残局2: 马后炮 (红先胜)
    // 经典马后炮杀法：马控制将的退路，炮借马为架将军
    // 布局: 黑将e10, 黑士d9, 黑卒e8;
    //        红马d8, 红炮e3, 红帅d1
    // 思路: 马跳到关键位置后炮将军，形成马后炮绝杀
    // ============================================================
    {
        PuzzleConfig p;
        p.name = "马后炮";
        p.description = "红先胜，经典马后炮杀法";
        p.redFirst = true;
        p.playerIsRed = true;
        p.pieces = {
            {4, 0, 4},   // 黑将 e10 (row=0,col=4) 九宫内✓
            {3, 1, 3},   // 黑士 d9  (row=1,col=3) 九宫内✓
            {11, 2, 4},  // 黑卒 e8  (row=2,col=4)
            {17, 3, 2},  // 红马 c7  (row=3,col=2)
            {25, 7, 5},  // 红炮 f3  (row=7,col=5)
            {20, 9, 3},  // 红帅 d1  (row=9,col=3) 九宫内✓
        };
        puzzles.append(p);
    }

    // ============================================================
    // 残局3: 铁门栓 (红先胜)
    // 车炮配合，炮借子为架封锁将门
    // 布局: 黑将e10, 黑士d10, 黑士f10;
    //        红车a8, 红炮d5, 红帅e1
    // 思路: 车移至底线配合炮将军
    // ============================================================
    {
        PuzzleConfig p;
        p.name = "铁门栓";
        p.description = "红先胜，车炮配合封锁杀";
        p.redFirst = true;
        p.playerIsRed = true;
        p.pieces = {
            {4, 0, 4},   // 黑将 e10 (row=0,col=4) 九宫内✓
            {3, 0, 3},   // 黑士 d10 (row=0,col=3) 九宫内✓
            {5, 0, 5},   // 黑士 f10 (row=0,col=5) 九宫内✓
            {16, 2, 0},  // 红车 a8  (row=2,col=0)
            {25, 5, 3},  // 红炮 d5  (row=5,col=3)
            {20, 9, 4},  // 红帅 e1  (row=9,col=4) 九宫内✓
        };
        puzzles.append(p);
    }

    // ============================================================
    // 残局4: 重炮 (红先胜)
    // 双炮叠在同一列，前炮为架后炮将军
    // 布局: 黑将d9, 黑象c10, 黑卒e8;
    //        红炮d5, 红炮d3, 红帅e1
    // 思路: 调整炮位形成重炮绝杀
    // ============================================================
    {
        PuzzleConfig p;
        p.name = "重炮";
        p.description = "红先胜，双炮叠杀";
        p.redFirst = true;
        p.playerIsRed = true;
        p.pieces = {
            {4, 1, 3},   // 黑将 d9  (row=1,col=3) 九宫内✓
            {2, 0, 2},   // 黑象 c10 (row=0,col=2) 象位合法✓
            {11, 2, 4},  // 黑卒 e8  (row=2,col=4)
            {25, 5, 4},  // 红炮 e5  (row=5,col=4)
            {26, 7, 3},  // 红炮 d3  (row=7,col=3)
            {20, 9, 4},  // 红帅 e1  (row=9,col=4) 九宫内✓
        };
        puzzles.append(p);
    }

    // ============================================================
    // 残局5: 卧槽马 (红先胜)
    // 马占据将旁斜位（卧槽位），配合车将军
    // 布局: 黑将e10, 黑士d10, 黑车a5;
    //        红马f8, 红车h10, 红帅e1
    // 思路: 利用卧槽马控制将位，车配合将军
    // ============================================================
    {
        PuzzleConfig p;
        p.name = "卧槽马";
        p.description = "红先胜，卧槽马配合车杀";
        p.redFirst = true;
        p.playerIsRed = true;
        p.pieces = {
            {4, 0, 4},   // 黑将 e10 (row=0,col=4) 九宫内✓
            {3, 0, 3},   // 黑士 d10 (row=0,col=3) 九宫内✓
            {5, 1, 5},   // 黑士 f9  (row=1,col=5) 九宫内✓ (蹩马脚)
            {0, 5, 0},   // 黑车 a5  (row=5,col=0)
            {17, 2, 5},  // 红马 f8  (row=2,col=5)
            {24, 3, 7},  // 红车 h7  (row=3,col=7)
            {20, 9, 4},  // 红帅 e1  (row=9,col=4) 九宫内✓
        };
        puzzles.append(p);
    }

    return puzzles;
}
